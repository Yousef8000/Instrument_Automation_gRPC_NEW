# Keithley 2230G Remote Controller

A modern FastAPI web application for remote control and monitoring of the Keithley 2230G Power Supply. This project provides both a user-friendly web interface and a RESTful API for device connection, channel configuration, real-time voltage monitoring, and output control.

---

## Features

- **Device Discovery:** Scan and connect to VISA-compatible instruments.
- **Channel Configuration:** Set voltage and current for each channel.
- **Output Control:** Turn output ON/OFF for all channels.
- **Real-Time Monitoring:** Live voltage monitoring and plotting with Plotly.js.
- **REST API:** Automate instrument control and data acquisition.

---

## Project Structure

```
main.py
routes.py
schema.py
instrument.py
monitor.py
grpc_server.py / grpc_client.py
helpers.py
index.html
```

---

## Getting Started

### Prerequisites

- Python 3.8 or higher
- [pyvisa](https://pyvisa.readthedocs.io/)
- [FastAPI](https://fastapi.tiangolo.com/)
- [Uvicorn](https://www.uvicorn.org/)

Install dependencies:

```sh
pip install fastapi uvicorn pyvisa pydantic
```

### Running the Application

Start the development server:

```sh
uvicorn main:app --reload
```

Open your browser and navigate to [http://localhost:8000](http://localhost:8000) to access the web interface.

---

## API Endpoints

| Method | Endpoint           | Description                        |
|--------|--------------------|------------------------------------|
| GET    | `/api/devices`     | List available VISA devices        |
| POST   | `/api/connect`     | Connect to a device                |
| POST   | `/api/settings`    | Apply channel settings             |
| POST   | `/api/output`      | Turn output ON/OFF                 |
| GET    | `/api/plot-data`   | Get voltage/time data for plotting |
| POST   | `/api/clear-data`  | Clear monitoring data              |
| GET    | `/api/status`      | Get device status                  |

**Note:**  
- All endpoints return JSON responses.  
- Authentication is not implemented by default; add as needed for production use.  
- For detailed request/response formats, see the [API documentation](http://localhost:8000/docs) generated by FastAPI.

## Web Interface

The web UI is served at `/` and provides intuitive controls for all major features, including real-time plotting and device management.